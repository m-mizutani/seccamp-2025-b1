# 要件ファイル - auditlogのログ量10倍化

## 概要
auditlog Lambda関数で生成されるログの量を10倍に増やすため、seedデータの管理方法を変更します。

## 現状の課題
- 現在、seedデータ（day_2024-08-12.bin.gz）がLambdaのバイナリに埋め込まれている
- 単一のseedファイルのみで、データ量が限定的
- ログ生成量を増やすには、より大きなseedデータが必要

## 機能要件

### 1. Seedデータの外部化
- seedデータをLambdaバイナリから分離し、専用のS3バケットに配置する
- Lambda起動時にS3からseedデータをダウンロードする
- ダウンロードしたデータはメモリに展開して使用する

### 2. 大容量Seedデータ対応
- 現在の10倍のデータ量を含む単一のseedファイルを作成
- 既存のseedデータ構造を維持しつつ、データ量のみを増加
- Lambda実行時にこの大容量seedファイルを読み込んで使用

### 3. パフォーマンス要件
- Lambda cold start時のseedデータダウンロードを効率化
- メモリ使用量を考慮した実装（Lambda のメモリ制限内で動作）
- warm start時はダウンロード済みデータを再利用

### 4. Terraformリソース要件
- seedデータ格納用の専用S3バケットを作成
- Lambda関数にS3読み取り権限を付与
- seedデータは手動でアップロード（自動化は不要）

## 非機能要件

### 1. 互換性
- 既存のAPIインターフェースは変更しない
- ログのフォーマットや品質は維持する

### 2. 可用性
- S3からのダウンロード失敗時はエラーを返して処理を終了

### 3. セキュリティ
- S3バケットへのアクセスは最小権限の原則に従う

### 4. 運用性
- seedデータの更新が容易に行える構成
- Terraformでインフラとデータのデプロイを一元管理

## 制約事項
- Lambda関数のメモリ制限（現在の設定値）を超えない
- Lambda関数のタイムアウト時間内で処理が完了する
- 既存のログ生成ロジックの基本構造は維持する

この要件ファイルでよろしいでしょうか？問題がある場合はフィードバックをお願いします。