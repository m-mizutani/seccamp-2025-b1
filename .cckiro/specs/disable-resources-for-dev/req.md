# 開発環境向けリソース無効化機能の要件

## 背景
開発作業中にAWSリソースのコストを削減するため、特定のリソースを無効化できる仕組みが必要。

## 要件

### 機能要件

1. **Terraformの変数による制御**
   - Terraformの変数（例：`enable_active_resources`）を定義し、この変数の値によってリソースの有効/無効を切り替えられること
   - デフォルトは `true`（有効）とし、開発時は `false` を指定して無効化できること

2. **無効化対象のリソース**
   - **auditlog LambdaのURL公開**
     - Lambda Function URLの作成を条件付きにする
     - 無効時はLambda関数は作成されるがURLエンドポイントは作成されない
   
   - **importerの定期実行**
     - EventBridge（CloudWatch Events）による定期実行ルールの作成を条件付きにする
     - 無効時はLambda関数は作成されるがスケジュールトリガーは設定されない
   
   - **Glue Crawlerの定期実行**
     - Glue Crawlerのスケジュール設定を条件付きにする
     - 無効時はCrawler自体は作成されるがスケジュールは設定されない

3. **運用面の考慮**
   - 変数の切り替えが容易であること（terraform.tfvars や環境変数で指定可能）
   - 有効/無効の切り替え時に既存リソースへの影響が最小限であること
   - リソースの状態がTerraform outputで確認できること

### 非機能要件

1. **互換性**
   - 既存のTerraform設定との後方互換性を維持すること
   - 変数を指定しない場合は現在の動作と同じになること

2. **保守性**
   - 条件分岐がシンプルで理解しやすいこと
   - 将来的に他のリソースも同様に制御可能な構造にすること

## 制約事項

- Terraformのバージョンは現在使用中のものに合わせる
- AWS provider のバージョンも現在のものを維持する
- 既存のリソース名やタグは変更しない