# クラウド環境でもセキュリティ監視が必要な理由

**時間：8:40-8:55  (15分)**


## 🚨 クラウド環境における基本的なセキュリティの理解

クラウド移行時によくある誤解として「クラウドプロバイダーが全てのセキュリティを担保してくれる」というものがあります。しかし実際には、クラウド環境でも従来と同様、むしろそれ以上にセキュリティ監視が重要になります。

### 「クラウドプロバイダーが守ってくれる」？

クラウドサービスでは「責任共有モデル」により、プロバイダーと利用者の責任範囲が明確に分かれています。

| サービス層 | 代表的なサービス | プロバイダー責任 | 利用者責任 |
|-----------|------------------|------------------|-------------|
| **IaaS**<br>(Infrastructure as a Service) | AWS EC2<br>Azure Virtual Machines<br>GCP Compute Engine | ✅ 物理データセンター<br>✅ ネットワークインフラ<br>✅ ホストOS・ハイパーバイザー<br>✅ 物理的な分離・隔離 | ❗ ゲストOS（パッチ管理・設定）<br>❗ アプリケーション<br>❗ データ保護<br>❗ ネットワーク設定<br>❗ ID・アクセス管理 |
| **PaaS**<br>(Platform as a Service) | AWS RDS<br>Azure App Service<br>GCP Cloud SQL | ✅ IaaS層の全責任<br>✅ OSパッチ管理<br>✅ ランタイム環境<br>✅ プラットフォームセキュリティ | ❗ アプリケーションコード<br>❗ データ分類・保護<br>❗ ユーザー認証・認可<br>❗ ネットワークトラフィック制御 |
| **SaaS**<br>(Software as a Service) | Microsoft 365<br>Google Workspace<br>Salesforce | ✅ アプリケーション全体<br>✅ インフラ・プラットフォーム<br>✅ データセンター物理セキュリティ<br>✅ 基本的なデータ保護 | ❗ ユーザー管理・権限設定<br>❗ データ分類・ラベリング<br>❗ 不正使用の検知・対応<br>❗ コンプライアンス設定 |

**重要ポイント**: 上位レイヤーほどプロバイダー責任が拡大するが、基本的なセキュリティ設定は常に利用者責任

### 境界防御に頼らないセキュリティ対策

従来のオンプレミス環境では、ファイアウォールやWAFなどの境界防御が主要なセキュリティ対策でした。これは静的な環境においては有効な側面がありましたが、クラウド環境では以下の理由によりそれ以上の対策が重要です。

- **絶え間ないアーキテクチャの変更**: 構成変更可能なのがクラウドの強みでもあり、弱みになりうる
- **動的なリソース**: Auto Scalingやコンテナにより定常的な運用でもリソースが増減
- **APIベースのアクセス**: 全ての操作がAPIで行われ、正規の認証情報があれば世界中からアクセス可能

### セキュリティ対策を促進するサービス郡

クラウド環境ではより精緻なセキュリティ管理を実現できるよう、様々な機能が提供されています。これらを活用し、インフラやアプリケーションの保護をしていくことが重要です。

- IAM（Identity and Access Management）：様々な条件にもとづく権限管理
- シークレット管理、鍵管理：機密情報のより厳密な管理
- CSPM（Cloud Security Posture Management）：セキュリティ設定の監視
- 認証管理サービス：認証やトークンの発行制御など

## 💡 クラウドのセキュリティ監視の必要性

本質的には情報セキュリティ全般の監視と同じですが、クラウド特有の事情もあります。

### 認証情報の悪用リスク

クラウド環境では有効な認証情報さえあれば世界中どこからでもアクセス可能なため、以下のような脅威への対策が必要です。

**外部からの脅威**:
- **認証情報の漏洩**: サプライチェーン攻撃、フィッシング、マルウェア経由での窃取
- **アカウント乗っ取り**: 退職者アカウントの悪用、休眠アカウントへの侵害

**内部からの脅威**:
- **悪意のある不正利用**: データ持ち出し、競合他社への情報提供、権限濫用

これらは全て「正規のアクセス」として処理されるため、従来の防御システムでは対応が困難です。

### クラウド設定リスク

クラウドの柔軟性と複雑性により、以下のような設定起因のリスクが増大します。特にクラウドは積極的にアーキテクチャを変更することが多く、その変更によって問題が発生する事が多いです。

**設定ミスによる露出**:
- **S3バケットの誤公開**: 世界中で日々発生している最も一般的な事故
- **セキュリティグループの過剰開放**: 「とりあえず動かすため」の一時的設定が恒久化
- **IAMポリシーの過剰権限**: 最小権限の原則から逸脱した「フルアクセス」設定

## 🏫 実践的ケーススタディ：監視によって緩和しえた課題

### インシデント1: 創業期のroot権限共有による追跡不能な破壊行為
無敗塾の創業初期、全員がroot権限を持つ運用体制での重大事故：

- **発生原因**: 深夜に何者かが本番RDSデータベースとS3バケットを削除。全ての学習データと顧客情報が消失し、バックアップも同時に削除されていた
- **原因分析**: 開発者全員がrootユーザーの認証情報を共有。CloudTrailが無効化されており、誰がいつ何をしたのか一切の記録なし。内部犯行か外部侵入かも判別不能
- **教訓**: CloudTrailの有効化という基本的な監視設定があれば、操作者のIPアドレスと実行時刻から犯人を特定可能。ログがないことで警察への被害届提出も困難に

### インシデント2: 事業拡大期の内部不正アクセス
無敗ラーニングの法人契約データが大量流出、顧客企業からの信頼を失う：

- **発生原因**: 退職した営業担当者のGoogle Workspaceアカウントから、法人契約情報を含む大量のドキュメントが外部へダウンロード
- **原因分析**: 正規の認証情報を使った内部犯行。通常の10倍以上のデータアクセスだったが、監視体制がなく1ヶ月後に顧客からの指摘で発覚
- **教訓**: Google Workspace APIログの監視により、異常なダウンロード量を即座に検知。リアルタイムアラートで不正を阻止できた

### インシデント3: グローバル展開時の設定ミスによるデータ漏洩
無敗大学の学生成績データがインターネット上で閲覧可能な状態に：

- **発生原因**: 海外リージョンへの展開時、S3バケットのパブリックアクセス設定を誤って有効化
- **原因分析**: マルチリージョン展開の複雑さから生じた設定ミス。手動レビューでは全リージョンの設定確認は困難
- **教訓**: AWS Config Rulesによる設定監視とコンプライアンスチェックがあれば、設定変更から数分以内に自動検知・修正が可能だった

## まとめ

クラウド環境は便利で拡張性がありますが、それは攻撃者にとっても同じです。API経由で全てが操作できるクラウドだからこそ、全ての操作を監視する必要があります。
